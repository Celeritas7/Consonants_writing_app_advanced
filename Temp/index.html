<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Burmese Learning App</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Myanmar:wght@400;700&family=Noto+Sans+Devanagari:wght@400;700&family=Noto+Sans+JP:wght@400;700&family=Noto+Sans+KR:wght@400;700&family=Noto+Sans+SC:wght@400;700&family=Noto+Sans+Telugu:wght@400;700&family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="bg-pattern"></div>
    
    <div class="container">
        <header>
            <h1>‚úçÔ∏è Burmese Learning</h1>
            <p class="subtitle">Master writing Burmese characters and words</p>
        </header>

        <!-- Language Tabs (for future multi-language support) -->
        <div class="language-tabs" id="languageTabs">
            <!-- Populated by JS -->
        </div>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-value" id="practicedCount">0</div>
                <div class="stat-label">Practiced</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="totalCount">0</div>
                <div class="stat-label">Total</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="progressPercent">0%</div>
                <div class="stat-label">Progress</div>
            </div>
        </div>

        <!-- Main Study Level Tabs -->
        <div class="study-level-tabs">
            <button class="study-tab active" data-level="consonant">
                <span class="tab-icon">·ÄÄ</span>
                <span class="tab-label">C (Consonants)</span>
            </button>
            <button class="study-tab" data-level="cv">
                <span class="tab-icon">·ÄÄ·Ä¨</span>
                <span class="tab-label">C+V (Combinations)</span>
            </button>
            <button class="study-tab" data-level="word">
                <span class="tab-icon">·ÄÖ·ÄÄ·Ä¨·Ä∏</span>
                <span class="tab-label">Word</span>
            </button>
            <button class="study-tab disabled" data-level="sentence" title="Coming soon">
                <span class="tab-icon">üìù</span>
                <span class="tab-label">Sentence</span>
            </button>
        </div>

        <!-- Mode Tabs (Practice/Quiz/Sheet/Review) -->
        <div class="main-tabs">
            <button class="main-tab active" data-view="practice">‚úèÔ∏è Practice</button>
            <button class="main-tab" data-view="quiz">üß† Quiz</button>
            <button class="main-tab" data-view="sheet">üìù Sheet</button>
            <button class="main-tab" data-view="review">üìä Review</button>
        </div>

        <!-- ========== PRACTICE VIEW ========== -->
        <div class="practice-view active" id="practiceView">
            <!-- Mode Toggle -->
            <div class="mode-toggle">
                <button class="mode-btn active" data-mode="sequential">Sequential</button>
                <button class="mode-btn" data-mode="random">Random</button>
                <button class="mode-btn" data-mode="unpracticed">Unpracticed Only</button>
            </div>

            <!-- Word Level Filter (shown only for word level) -->
            <div class="word-filters" id="wordFilters" style="display: none;">
                <div class="filter-group">
                    <label>Group by:</label>
                    <select id="wordGroupBy">
                        <option value="anchor">Anchor Words</option>
                        <option value="consonant">Consonant</option>
                        <option value="category">Category</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Anchor:</label>
                    <select id="anchorFilter">
                        <option value="">All Anchors</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Category:</label>
                    <select id="categoryFilter">
                        <option value="">All Categories</option>
                    </select>
                </div>
            </div>

            <!-- Main Practice Area -->
            <div class="practice-area">
                <!-- Character Display -->
                <div class="character-panel fade-in">
                    <div class="canvas-title" id="practiceTitle">Current Character</div>
                    <div class="target-char burmese" id="targetChar">·ÄÄ</div>
                    <div class="char-info">
                        <div class="romanization devanagari" id="romanization">‡§ï</div>
                        <div id="charDescription">Consonant 1 of 33</div>
                        <!-- Word meaning (shown for word level) -->
                        <div class="word-meaning" id="wordMeaning" style="display: none;">
                            <div class="meaning-text" id="meaningText"></div>
                            <div class="hint-text" id="hintText"></div>
                        </div>
                    </div>
                    <div class="nav-buttons">
                        <button class="nav-btn" id="prevBtn">‚Üê</button>
                        <button class="nav-btn" id="randomBtn">üé≤</button>
                        <button class="nav-btn" id="nextBtn">‚Üí</button>
                    </div>
                </div>

                <!-- Canvas Area -->
                <div class="canvas-panel fade-in" style="animation-delay: 0.1s;">
                    <div class="canvas-header">
                        <span class="canvas-title">Practice Writing</span>
                        <div class="canvas-tools">
                            <button class="tool-btn" id="undoBtn">‚Ü© Undo</button>
                            <button class="tool-btn" id="clearBtn">üóë Clear</button>
                        </div>
                    </div>
                    
                    <div class="canvas-container">
                        <canvas id="bgCanvas" class="writing-canvas"></canvas>
                        <canvas id="guideCanvas" class="writing-canvas"></canvas>
                        <canvas id="drawCanvas" class="writing-canvas"></canvas>
                    </div>

                    <div class="canvas-actions">
                        <button class="action-btn secondary" id="skipBtn">Skip</button>
                        <button class="action-btn primary" id="markDoneBtn">‚úì Mark as Done</button>
                    </div>

                    <div class="stroke-control">
                        <label>Stroke Width:</label>
                        <input type="range" class="stroke-slider" id="strokeSlider" min="2" max="20" value="8">
                        <span id="strokeValue">8px</span>
                    </div>

                    <div class="guide-toggle">
                        <label class="toggle-switch">
                            <input type="checkbox" id="showGuide" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <span class="toggle-label">Show guide character</span>
                    </div>
                </div>

                <!-- Progress Panel -->
                <div class="progress-panel fade-in" style="animation-delay: 0.2s;">
                    <div class="progress-title">Progress Grid</div>
                    <div class="char-grid" id="charGrid">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== QUIZ VIEW ========== -->
        <div class="quiz-view" id="quizView">
            <!-- Daily Target Section -->
            <div class="daily-target-section">
                <div class="daily-target-header">
                    <span class="daily-target-label">Daily Target:</span>
                    <input type="number" class="daily-target-input" id="dailyTargetInput" value="10" min="1" max="100">
                </div>
                <div class="session-progress-bar">
                    <div class="session-progress-fill" id="sessionProgress"></div>
                </div>
                <div class="session-progress-text">
                    <span class="value" id="sessionCount">0</span> / <span id="sessionTarget">10</span> characters practiced
                </div>
            </div>

            <!-- Quiz Stats -->
            <div class="quiz-stats">
                <div class="quiz-stat correct-stat">
                    <span class="value" id="quizCorrect">0</span>Correct
                </div>
                <div class="quiz-stat incorrect-stat">
                    <span class="value" id="quizIncorrect">0</span>Incorrect
                </div>
                <div class="quiz-stat streak-stat">
                    <span class="value" id="quizStreak">0</span>Streak
                </div>
            </div>

            <!-- Quiz Mode Toggle -->
            <div class="mode-toggle">
                <button class="mode-btn active" data-quiz-mode="sequential">Sequential</button>
                <button class="mode-btn" data-quiz-mode="random">Random</button>
                <button class="mode-btn" data-quiz-mode="mistakes">Review Mistakes</button>
            </div>

            <!-- Quiz Practice Area -->
            <div class="practice-area">
                <!-- Quiz Prompt -->
                <div class="character-panel fade-in">
                    <div class="canvas-title">Write this character</div>
                    <div class="quiz-hint" id="quizRoman">ka</div>
                    <div class="quiz-prompt devanagari" id="quizDevanagari">‡§ï</div>
                    <div class="char-info">
                        <div id="quizDescription">Character 1 of 33</div>
                    </div>
                    
                    <!-- Answer Reveal -->
                    <div class="answer-reveal" id="answerReveal">
                        <div class="answer-label">Correct Answer:</div>
                        <div class="answer-char burmese" id="answerChar">·ÄÄ</div>
                        <div class="result-buttons">
                            <button class="result-btn incorrect" id="markIncorrect">‚úó Wrong</button>
                            <button class="result-btn correct" id="markCorrect">‚úì Correct</button>
                        </div>
                    </div>

                    <div class="nav-buttons" id="quizNavButtons">
                        <button class="nav-btn" id="quizPrevBtn">‚Üê</button>
                        <button class="nav-btn" id="quizRandomBtn">üé≤</button>
                        <button class="nav-btn" id="quizNextBtn">‚Üí</button>
                    </div>
                </div>

                <!-- Quiz Canvas Area -->
                <div class="canvas-panel fade-in" style="animation-delay: 0.1s;">
                    <div class="canvas-header">
                        <span class="canvas-title">Your Answer</span>
                        <div class="canvas-tools">
                            <button class="tool-btn" id="quizUndoBtn">‚Ü© Undo</button>
                            <button class="tool-btn" id="quizClearBtn">üóë Clear</button>
                        </div>
                    </div>
                    
                    <div class="canvas-container">
                        <canvas id="quizBgCanvas" class="writing-canvas"></canvas>
                        <canvas id="quizDrawCanvas" class="writing-canvas"></canvas>
                    </div>

                    <div class="canvas-actions">
                        <button class="action-btn secondary" id="quizSkipBtn">Skip</button>
                        <button class="action-btn check-btn" id="checkAnswerBtn">üëÅ Check Answer</button>
                    </div>

                    <div class="stroke-control">
                        <label>Stroke Width:</label>
                        <input type="range" class="stroke-slider" id="quizStrokeSlider" min="2" max="20" value="8">
                        <span id="quizStrokeValue">8px</span>
                    </div>
                </div>

                <!-- Quiz Progress Panel -->
                <div class="progress-panel fade-in" style="animation-delay: 0.2s;">
                    <div class="progress-title">Quiz Progress</div>
                    <div class="char-grid" id="quizCharGrid">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== PRACTICE SHEET VIEW ========== -->
        <div class="sheet-view" id="sheetView">
            <div class="sheet-container">
                <div class="sheet-header">
                    <div class="sheet-title">üìù Practice Sheet</div>
                    <div class="sheet-actions">
                        <div class="guide-toggle" style="margin: 0;">
                            <label class="toggle-switch">
                                <input type="checkbox" id="sheetShowGuide" checked>
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label">Show ghost characters</span>
                        </div>
                        <button class="action-btn secondary" onclick="window.print()">üñ®Ô∏è Print</button>
                    </div>
                </div>
                <div class="sheet-grid" id="sheetGrid">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>

        <!-- ========== REVIEW CHART VIEW ========== -->
        <div class="review-view" id="reviewView">
            <div class="review-container">
                <div class="review-header">
                    <div class="review-title">üìä Review Chart</div>
                    <div class="review-mode-toggle">
                        <button class="mode-btn active" data-review-mode="last5">Last 5 Attempts</button>
                        <button class="mode-btn" data-review-mode="overall">Overall</button>
                    </div>
                </div>
                <div class="review-legend">
                    <div class="legend-item">
                        <div class="legend-color strong"></div>
                        <span>Strong (80-100%)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color good"></div>
                        <span>Good (60-79%)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color medium"></div>
                        <span>Medium (40-59%)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color weak"></div>
                        <span>Weak (20-39%)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color very-weak"></div>
                        <span>Very Weak (0-19%)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color not-attempted"></div>
                        <span>Not Attempted</span>
                    </div>
                </div>
                <div class="review-grid" id="reviewGrid">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>

        <!-- Connection Status -->
        <div class="connection-status" id="connectionStatus">
            <span class="status-dot"></span>
            <span class="status-text">Offline Mode</span>
        </div>
    </div>

    <!-- Supabase Config Modal -->
    <div class="modal" id="supabaseModal" style="display: none;">
        <div class="modal-content">
            <h3>üîó Connect to Supabase</h3>
            <p>Enter your Supabase credentials to enable Word learning from database:</p>
            <div class="form-group">
                <label>Project URL:</label>
                <input type="text" id="supabaseUrl" placeholder="https://your-project.supabase.co">
            </div>
            <div class="form-group">
                <label>Anon Key:</label>
                <input type="text" id="supabaseKey" placeholder="eyJ...">
            </div>
            <div class="modal-actions">
                <button class="action-btn secondary" onclick="closeSupabaseModal()">Cancel</button>
                <button class="action-btn primary" onclick="connectSupabase()">Connect</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/app.js"></script>
</body>
</html>
